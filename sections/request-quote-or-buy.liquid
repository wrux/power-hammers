{% comment %}
  Section: request-quote-or-buy.liquid
  Shows buy buttons or request quote form based on product metafield.
  Add the Shopify Forms app block in the Theme Editor after adding this section to your product template.
{% endcomment %}

{% if product.metafields.custom.disable_buy == true or product.metafields.custom.disable_buy == 'true' %}
  <!-- Add the Shopify Forms app block below using the Theme Editor -->
  {% comment %} The app block will be injected here. {% endcomment %}
  {% for block in section.blocks %}
    {% if block.type contains 'app' %}
      {{ block.settings.form_content }}
    {% endif %}
  {% endfor %}
{% else %}
  {% render 'buy-buttons', product: product, section_id: section.id %}
{% endif %}

{% schema %}
{
  "name": "Quote or Buy Btns",
  "settings": [],
  "blocks": [
    {
      "type": "app-block",
      "name": "App Block",
      "settings": [
        {
          "type": "liquid",
          "id": "form_content",
          "label": "Form Content"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Quote or Buy Btns"
    }
  ]
}
{% endschema %}
