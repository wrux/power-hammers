{% if product.metafields.custom.disable_buy == true %}
  {{ 'request-invoice.css' | asset_url | stylesheet_tag }}

  {%- form 'contact',
      id: 'requestInvoice',
      return_to: "{{ product.url }}#requestInvoice",
      class: 'request-invoice-form'
  -%}
    <h3><strong>Request an invoice</strong></h3>

    <p>If you need to request an invoice for your accounting requirements, please use this form below.</p>

    <!-- Capture product name -->
    <input type="hidden" name="contact[product]" value="{{ product.title }}">

    <label for="your-email">Your email:</label>
    <input id="your-email"
           name="contact[email]"
           type="email"
           placeholder="Your email"
           required>

    <button type="submit" class="product-form__submit button button--full-width button--secondary">
      Request an invoice
    </button>
  {%- endform -%}

  {% if form.posted_successfully? %}
    <p id="requestInvoiceMessage" class="request-invoice-success">
      ✅ Your invoice request has been sent. We’ll get back to you shortly.
    </p>
  {% elsif form.errors %}
    <p id="requestInvoiceMessage" class="request-invoice-error">
      ⚠️ There was an error submitting your request. Please try again.
    </p>
  {% endif %}
{% endif %}